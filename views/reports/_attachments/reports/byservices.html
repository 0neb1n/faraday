<script type="text/javascript">
function get_report_div(workspace, view,design){
    var arr = [];
	json_url = "/" + workspace + "/_design/" + design + "/_view/" + view+"?group=true";
    var divs = "";
    $.ajaxSetup({
        async: false
    });
	$.getJSON(json_url, function(data) {
		var colores = ["negro", "rojo"];
		var i = 0;
		divs += "<div class='columna untercio faraday-tooltips'><article class='untercio'><header><h2>Services report</h2></header><div class='main'>";

        var row = data.rows;
        for (i = 0; i < row.length; i++) {
            arr.push([row[i].value,row[i].key]);
        }
        obj = [];
        var obj = arr.sort(function(a,b){   
            if (a[0] === b[0]) {
                return 0;
            }
            else {
                return (a[0] > b[0]) ? -1 : 1;
            }
        });

        for (i = 0; i < obj.length; i++) {
			divs += "<div class=\"columna unquinto services \"><a class=\"faraday-tooltip\" title='sakj' href=\"#\"><article class=\"dato2 fondo-"+colores[i%2]+"\"><section><div class=\"nro texto-"+colores[(i+1)%2]+"\">"+obj[i][0]+"</div><div class=\"txt texto-blanco\">"+obj[i][1]+"</div></section></article></a></div>";
		}
		divs +="</article></div>";
		return divs;
	});
	return divs;
}

function seleccionar(){
    //selecciona las ips
    jQuery.fn.selectText = function(){
        var doc = document;
        var element = this[0];
        if (doc.body.createTextRange) {
            var range = document.body.createTextRange();
            range.moveToElementText(element);
            range.select();
        } else if (window.getSelection) {
            var selection = window.getSelection();        
            var range = document.createRange();
            range.selectNodeContents(element);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    };
	var boton = $("#boton");
    var selector = boton.data('selector');
    $(selector).selectText();
}

$(document).ready(function() {
    $('#cont').on('mouseenter', 'a.faraday-tooltip[title]', function (event) {
        $(this).qtip({
            overwrite: false, // Don't overwrite tooltips already bound
            show: {
                event: event.type, // Use the same event type as above
                ready: true // Show immediately - important!
            },
            hide: {
                fixed: true,
                delay: 300
            },
            content:{
                text: function(event, api) {
                    var name = $(this)[0].innerHTML.split(">")[5].split("<")[0];
                    var hosts = "<div id='contenido'>Hosts:";
                    hosts += load_hosts_by_service(name, true);
                    hosts += "</div><button class='btn btn-danger dropdown-toggle' style='height:25px;width:100px;line-height:10px' id='boton' onclick=\"seleccionar()\" data-selector=\"#contenido\">Select All</button>";
                    return hosts;
                }
            }
        });
    });
});

</script>